food_estimation_task:
  description: >
    Analyze the provided image at {image_fs_location} to identify all visible food items or raw foods.
    For each item, determine a descriptive name and estimate its weight in grams.
    Ensure the names are suitable for recipe lookup and the weight estimations are realistic.
    If confidence in any item's identification or quantity is below 90%, repeat the analysis.
    If there is a food product - list it, do not try to find out/guess its ingredients.
  expected_output: >
    A markdown-formatted list of all identified food items in the format: 
    - <name>: <weight in grams> â€” confidence: <confidence level>%
    Only include results where confidence is 90% or higher.
  agent: vision_food_estimator

find_recipe_task:
  description: >
    Given a context containing available food items (generated by a previous agent),
    search the internet using the provided tool for the 5 best recipes that can be made
    using those items. Recipes should be practical, well-rated, and match as many items
    from the list as possible. Ignore any TikTok website/location related recipes.
  expected_output: >
    A markdown-formatted list of exactly 5 recipes in the format:
    1. Recipe Name (URL)
    2. Recipe Name (URL)
    3. Recipe Name (URL)
    4. Recipe Name (URL)
    5. Recipe Name (URL)
  agent: recipe_hunter

find_ingredients_task:
  description: >
    From a context containing several recipes with URLs and a list of available
    ingredients, select the top 3 recipes based on taste preference first and
    nutrition second. Then scrape each selected recipe URL (pass it as scrape_url) to extract its ingredients
    and compare them with the current inventory. For each recipe, list only the
    missing ingredients along with the quantity to be acquired.
  expected_output: >
    A markdown-formatted summary with:
    - The names and URLs of the top 3 recipes
    - For each recipe, a full ingredients list with "[OK]" or "[NEED MORE]" tags
    - For "[NEED MORE]", include the shortfall in quantity clearly

    Example:
    <Recipe name> (<URL>):
      Ingredients:
        - <ingredient>: <amount> [OK]
        - <ingredient>: <amount> [NEED MORE] acquire <X> more.
  agent: choose_recipe_and_ingredients

html_format_task:
  description: >
    Create a beautiful HTML document that presents the complete food analysis and recipe recommendations.
    Use the context from all previous tasks to generate a comprehensive HTML report that includes:
    
    1. **Food Analysis Section**: Display identified food items with images and confidence scores
    2. **Recipe Recommendations**: Present the top 3 recipes with:
       - Recipe images (search for and embed appropriate food images)
       - Recipe titles and descriptions
       - Complete ingredient lists
       - Available vs missing ingredients breakdown
       - Shopping lists with quantities
    3. **Summary Section**: Overall recommendations and next steps
    
    Requirements for the HTML:
    - Modern, responsive design with clean CSS styling
    - Embedded recipe images (search for appropriate images for each recipe)
    - Color-coded ingredient status (green for available, red for missing)
    - Make sure that amount of ingredient is enough: if <amount> is less than <required>, mark as [NEED MORE] and advise on how much to acquire.
    - Be accurate as what ingredients were available originally - if an ingredient was not available at the start, it should be marked as [NEED MORE] regardless of any subsequent analysis.
    - Professional typography and layout
    - Save the final HTML to 'recipe_recommendations.html'
    
    Find and embed high-quality food images for each recipe to make the report visually appealing.
  expected_output: >
    A complete HTML file saved as 'recipe_recommendations.html' containing:
    - Beautiful visual presentation of food analysis results
    - Recipe cards with embedded images
    - Color-coded ingredient availability
    - Professional styling and responsive design
    - Clear shopping recommendations
    The HTML should be ready to open in any web browser for immediate use.
  agent: html_formatter
  output_file: 'recipe_recommendations.html'


# reporting_task:
#   description: >
#     Review the context you got and expand each topic into a full section for a report.
#     Make sure the report is detailed and contains any and all relevant information.
#   expected_output: >
#     A fully fledged report with the main topics, each with a full section of information.
#     Formatted as markdown without '```'
#   agent: reporting_analyst
